

<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: util.js</title>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./build/entry.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
    <link type="text/css" rel="stylesheet" href="styles/iframe.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                     
                        <h1 class="navbar-item">Endb</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                 
                <div class="navbar-menu">
                    <div class="navbar-end">
                    
                        <div class="navbar-item">
                            <a href="https://github.com/chroventer/endb" target="_blank">
                                GitHub
                            </a>
                        </div>
                    
                        <div class="navbar-item">
                            <a href="https://npmjs.com/package/endb" target="_blank">
                                NPM
                            </a>
                        </div>
                    
                        <div class="navbar-item">
                            <a href="https://discord.gg/nSZZ2XZ" target="_blank">
                                Discord
                            </a>
                        </div>
                    
                    </div>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="Endb.html">Endb</a></li><li><a href="Util.html">Util</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Source</p>
                        <h1>util.js</h1>
                    </header>
                    
                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
 * Utilities for Endb.
 */
class Util {
	/**
	 * Adds the namespace as a prefix to the key.
	 * @param {string} key The key of an element.
	 * @param {string} namespace The namespace of the database.
	 */
	static addKeyPrefix(key, namespace) {
		if (Array.isArray(key)) {
			return key.map(k => `${namespace}:${k}`);
		}

		return `${namespace}:${key}`;
	}

	/**
	 * Checks whether a value is buffer-like or not.
	 * @param {*} x The value to check.
	 * @return {boolean}
	 */
	static isBufferLike(x) {
		return (
			Util.isObject(x) &amp;&amp;
			x.type === 'Buffer' &amp;&amp;
			(Array.isArray(x.data) || typeof x.data === 'string')
		);
	}

	/**
	 * Checks whether a value is an object or not.
	 * @param {*} x The value to check.
	 * @return {boolean}
	 */
	static isObject(x) {
		return typeof x === 'object' &amp;&amp; x !== null;
	}

	static load(options) {
		const adapters = {
			level: './adapters/leveldb',
			leveldb: './adapters/leveldb',
			mongo: './adapters/mongodb',
			mongodb: './adapters/mongodb',
			nedb: './adapters/nedb',
			mysql: './adapters/mysql',
			mysql2: './adapters/mysql',
			postgres: './adapters/postgres',
			postgresql: './adapters/postgres',
			redis: './adapters/redis',
			sqlite: './adapters/sqlite',
			sqlite3: './adapters/sqlite'
		};
		if (options.adapter || options.uri) {
			const adapter = options.adapter || /^[^:]*/.exec(options.uri)[0];
			if (adapters[adapter] !== undefined) {
				return new (require(adapters[adapter]))(options);
			}
		}

		return new Map();
	}

	/**
	 * Parses a JSON string, constructing the JavaScript value or object described by the string.
	 * @param {string} text The string to parse as JSON.
	 * @return {object} The `Object` corresponding to the given JSON text.
	 */
	static parse(text) {
		return JSON.parse(text, (_key, value) => {
			if (Util.isBufferLike(value)) {
				if (Array.isArray(value.data)) {
					return Buffer.from(value.data);
				}

				if (typeof value.data === 'string') {
					if (value.data.startsWith('base64:')) {
						return Buffer.from(value.data.slice('base64:'.length), 'base64');
					}

					return Buffer.from(value.data);
				}
			}

			return value;
		});
	}

	/**
	 * 
	 * @param {number} base 
	 * @param {string} op 
	 * @param {number} opand
	 * @return {number} 
	 */
	static math(base, op, opand) {
		switch (op) {
			case 'add':
			case 'addition':
			case '+':
				return base + opand;
			case 'sub':
			case 'subtract':
			case '-':
				return base - opand;
			case 'mult':
			case 'multiply':
			case '*':
				return base * opand;
			case 'div':
			case 'divide':
			case '/':
				return base / opand;
			case 'exp':
			case 'exponent':
			case '^':
				return base ** opand;
			case 'mod':
			case 'modulo':
			case '%':
				return base % opand;
			default:
				throw new Error('Must pass an operation');
		}
	}

	/**
	 * Removes the namespace as a prefix from a key.
	 * @param {string} key The key of an element.
	 * @param {*} namespace The namespace of the database.
	 */
	static removeKeyPrefix(key, namespace) {
		return key.replace(`${namespace}:`, '');
	}

	/**
	 * Safely import modules from `node_modules`; local module and JSOn can be imported using a relative path.
	 * @param {string} id The name or path of the module.
	 * @return {*} Exported module content.
	 */
	static safeRequire(id) {
		try {
			return require(id);
		} catch (error) {
			console.error(
				`Install ${id} to continue; run "npm install ${id}" to install it.`
			);
		}
	}

	/**
	 * Converts a JavaScript object or value to a JSON string
	 * @param {*} value The value to convert to a JSON string.
	 * @param {string|number} [space] A `String` or `Number` object that's used to insert white space into the output JSON string for readability purposes.
	 * @return A JSON string representing the given value.
	 */
	static stringify(value, space) {
		return JSON.stringify(
			value,
			(_key, value) => {
				if (Util.isBufferLike(value)) {
					if (Array.isArray(value.data)) {
						if (value.data.length > 0) {
							value.data = `base64:${Buffer.from(value.data).toString(
								'base64'
							)}`;
						} else {
							value.data = '';
						}
					}
				}

				return value;
			},
			space
		);
	}
}

module.exports = Util;
</code></pre>
        </article>
    </section>




                </div>
            </div>
        </div>
    </div>



<script src="scripts/app.min.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
